<!--
 * @Author: your name
 * @Date: 2021-06-23 11:11:07
 * @LastEditTime: 2021-08-04 17:33:02
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /fcwz-ui/packages/page-edit/src/layer-photo.vue
-->
<template>
  <div
    class="pg-photo-layer"
    :data-photoid="layer.data && layer.data.photoId"
    :data-layerid="layerId"
    :data-pageid="pageId"
    data-move="true"
  >
    <div v-if="bleed.borderWidth" :style="bleedVal" class="bleed"></div>
    <div class="layer-invalid-icon" v-if="layer.data && !layer.data.valid">
      <tooltip
        :content="
          `图片质量低，打印清晰度不足，建议:更换照片(至少
              ${layer.width}*${layer.height}px
)、更换模版`
        "
      >
        <svg
          t="1539567573029"
          style=""
          viewBox="0 0 1142 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="4576"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          width="20"
          height="20"
        >
          <path
            d="M512 748.307692h118.153846v118.153846h-118.153846zM512 413.538462h118.153846v275.692307h-118.153846z"
            fill="#F7A455"
            p-id="4577"
          ></path>
          <path
            d="M1128.369231 935.384615l-506.092308-888.123077c-5.907692-9.846154-13.784615-17.723077-21.661538-21.661538-13.784615-7.876923-29.538462-9.846154-45.292308-5.907692-15.753846 3.938462-27.569231 13.784615-35.446154 27.56923l-506.092308 888.123077c-5.907692 9.846154-7.876923 19.692308-7.876923 29.538462 0 33.476923 25.6 59.076923 59.076923 59.076923h1012.184616c9.846154 0 19.692308-1.969231 29.538461-7.876923 13.784615-7.876923 23.630769-19.692308 27.569231-35.446154 3.938462-15.753846 1.969231-31.507692-5.907692-45.292308z m-1029.907693 9.846154l472.615385-829.046154 472.615385 829.046154h-945.23077z"
            fill="#F7A455"
            p-id="4578"
          ></path>
        </svg>
      </tooltip>
    </div>
    <div
      class="pg-layer-mask"
      v-if="layer.data"
      data-type="layer"
      :data-pageid="pageId"
      :data-layerid="layerId"
    >
      <div class="centre">
        点击编辑
      </div>
      <div
        class="layer-del-icon"
        v-if="!isLogo"
        data-type="del"
        :data-delid="layerId"
        title="删除图层"
      >
        <svg
          t="1627709387465"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="1992"
          width="22"
          height="22"
        >
          <path
            d="M782.246469 240.527099c36.608779 36.608779 64.905242 79.291904 84.184331 126.794801 18.651802 45.9004 28.084639 94.451162 28.010961 144.263661 0.069585 49.808406-9.359158 98.363262-28.015054 144.260591-19.279089 47.50392-47.569412 90.189092-84.175121 126.793778-36.606733 36.606733-79.294974 64.900126-126.797871 84.179214-45.896306 18.654872-94.451162 28.084639-144.259568 28.015054-49.808406 0.069585-98.365308-9.358135-144.259568-28.015054-47.50392-19.277042-90.192162-47.569412-126.800941-84.179214-36.604686-36.603663-64.895009-79.289857-84.173075-126.793778-18.656919-45.895283-28.084639-94.452185-28.015054-144.260591-0.072655-49.812499 9.359158-98.363262 28.010961-144.263661 19.280112-47.501874 47.575552-90.186022 84.183308-126.793778 36.604686-36.604686 79.286788-64.899102 126.789685-84.178191 45.9004-18.651802 94.451162-28.084639 144.263661-28.011984 49.813522-0.072655 98.363262 9.360182 144.264685 28.011984C702.959681 175.626973 745.642806 203.922413 782.246469 240.527099M827.505255 195.268312C652.829957 20.593014 369.558335 20.593014 194.883037 195.269335 20.202623 369.94975 20.201599 653.220349 194.876897 827.895647c174.681438 174.681438 457.952037 174.679391 632.632451 0C1002.18567 653.220349 1002.18567 369.94975 827.505255 195.268312L827.505255 195.268312 827.505255 195.268312zM557.129338 513.486864 716.737476 353.87975l-45.222971-45.223994L511.906367 468.263893 352.762811 309.12136l-45.344744 45.344744 159.142533 159.143557L309.697993 670.472268l45.201481 45.201481 156.86363-156.86363 157.358911 157.356864 45.333488-45.333488L557.129338 513.486864zM714.465736 670.824285"
            p-id="1993"
            fill="#fff"
          ></path>
        </svg>
      </div>
    </div>
    <div v-else class="pg-layer-hint centre">
      <div v-if="isLogo">LOGO</div>
      <svg
        v-else
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="1746"
        width="30px"
        height="30px"
      >
        <path
          d="M856.32 428.064c-94.816 0-144.928 90.656-185.184 163.52-25.824 46.688-52.512 94.944-78.72 97.568-28.544-5.664-48.096-23.2-70.656-43.36-31.744-28.448-67.488-60.288-130.464-57.952-76.8 3.328-146.24 57.696-206.4 161.696a32 32 0 0 0 55.392 32.064c48.48-83.84 100.224-127.488 153.728-129.824 36.928-1.44 56.96 16.576 84.992 41.664 26.88 24.096 57.344 51.36 105.888 59.392a31.584 31.584 0 0 0 5.216 0.448c64.704 0 101.44-66.464 136.96-130.72 28.352-51.328 57.504-104 97.184-123.072v369.984H128V231.68h488.16a32 32 0 1 0 0-64H96a32 32 0 0 0-32 32v701.824a32 32 0 0 0 32 32h760.32a32 32 0 0 0 32-32v-441.44a32 32 0 0 0-32-32z"
          p-id="1747"
          fill="#8a8a8a"
        ></path>
        <path
          d="M180.96 424.32c0 57.952 47.168 105.12 105.12 105.12S391.2 482.272 391.2 424.32s-47.168-105.088-105.12-105.088-105.12 47.136-105.12 105.088z m146.24 0a41.152 41.152 0 0 1-82.24 0 41.152 41.152 0 0 1 82.24 0zM960 174.656h-61.376V113.28a32 32 0 1 0-64 0v61.344H752.64a32 32 0 1 0 0 64h81.984v81.984a32 32 0 1 0 64 0v-81.952H960a32 32 0 1 0 0-64z"
          p-id="1748"
          fill="#8a8a8a"
        ></path>
      </svg>
    </div>
    <photo-layer :layer="layer" :scale="scale"></photo-layer>
  </div>
</template>

<script>
import PhotoLayer from '../../layer-photo';
import Tooltip from '../../tooltip';
export default {
  props: {
    bleed: [Object, Array],
    layer: Object,
    layerId: String,
    pageId: String,
    scale: {
      type: Number,
      default: 1
    }
  },
  components: {
    PhotoLayer,
    Tooltip
  },
  computed: {
    bleedVal() {
      return {
        ...this.bleed,
        borderRadius: this.layer.style ? '100%' : 0
      };
    },
    isLogo() {
      return this.layer.shape === 'logo';
    }
  }
};
</script>
